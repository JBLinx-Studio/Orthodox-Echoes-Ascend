@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400&family=Source+Serif+Pro:wght@400;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 220 33% 13%;
    --foreground: 220 14% 96%;

    --card: 220 33% 17%;
    --card-foreground: 220 14% 96%;

    --popover: 220 33% 13%;
    --popover-foreground: 220 14% 96%;

    --primary: 220 14% 96%;
    --primary-foreground: 220 33% 13%;

    --secondary: 42 60% 52%; /* Gold */
    --secondary-foreground: 220 33% 13%;

    --muted: 220 33% 20%;
    --muted-foreground: 220 14% 80%;

    --accent: 42 60% 52%; /* Gold */
    --accent-foreground: 220 33% 13%;

    --destructive: 0 62% 30%;
    --destructive-foreground: 210 40% 98%;

    --border: 220 33% 20%;
    --input: 220 33% 20%;
    --ring: 224 76% 48%;
    
    --radius: 0.5rem;

    --orthodox-blue: 215 23% 16%;
    --gold: 42 57% 52%;
    --byzantine: 342 53% 40%;
    --byzantine-dark: 342 53% 35%;
    --byzantine-light: 342 53% 45%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-body;
    /* Enriched background with gradient for depth */
    background: radial-gradient(circle at center, #111725 0%, #0a0d16 70%, #050710 100%);
    /* Box shadow for vignette effect */
    box-shadow: inset 0 0 250px rgba(0, 0, 0, 0.8);
    min-height: 100vh;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-display;
  }
}

@layer components {
  /* Enhanced Byzantine border with cathedral motifs */
  .byzantine-border {
    @apply border border-byzantine/30 rounded-md p-4 relative;
    background-image: linear-gradient(to bottom, rgba(155, 35, 53, 0.03), rgba(212, 175, 55, 0.03));
  }

  .byzantine-border::before {
    content: "";
    @apply absolute -top-2 -left-2 w-4 h-4 border-t border-l border-gold;
  }
  
  .byzantine-border::after {
    content: "";
    @apply absolute -bottom-2 -right-2 w-4 h-4 border-b border-r border-gold;
  }

  /* Cathedral-style icon frame */
  .icon-frame {
    @apply relative overflow-hidden bg-[#1A1F2C] border border-gold/40 rounded-md shadow-lg;
    background-image: linear-gradient(to bottom, rgba(26, 31, 44, 0.9), rgba(10, 13, 22, 0.95));
  }

  .icon-frame::before {
    content: "";
    @apply absolute inset-0 bg-gradient-to-b from-gold/10 to-transparent opacity-50;
  }
  
  /* Fixed cathedral heading style with proper underline positioning */
  .orthodox-heading {
    @apply font-display relative inline-block pb-4 px-6;
  }
  
  .orthodox-heading::before,
  .orthodox-heading::after {
    content: "✦";
    @apply absolute text-sm text-gold/80 top-1/2 -translate-y-1/2;
  }
  
  .orthodox-heading::before {
    @apply -left-4;
  }
  
  .orthodox-heading::after {
    @apply -right-4;
  }
  
  /* Fixed underline positioning - now properly underneath the text */
  .orthodox-heading::after {
    content: "";
    @apply absolute bottom-2 left-1/4 right-1/4 h-0.5 bg-gradient-to-r from-transparent via-gold/50 to-transparent;
  }

  /* Cathedral-style navigation links */
  .nav-link {
    @apply relative text-foreground hover:text-gold transition-colors duration-300;
  }
  
  .nav-link::after {
    content: "";
    @apply absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-gold/80 to-transparent transform scale-x-0 transition-transform duration-300;
    transform-origin: center;
  }
  
  .nav-link:hover::after {
    @apply scale-x-100;
  }

  .active-nav-link {
    @apply text-gold;
  }
  
  .active-nav-link::after {
    @apply scale-x-100;
  }
  
  /* Candle glow effect */
  .candle-glow {
    @apply relative;
    filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.6));
  }
  
  .candle-glow::after {
    content: "";
    @apply absolute -top-6 left-1/2 -translate-x-1/2 w-1.5 h-6 bg-gradient-to-t from-gold via-gold/70 to-white/80 rounded-full;
    animation: candle-flicker 3s ease-in-out infinite;
  }
  
  /* Cathedral scroll with ornate edges */
  .scroll-parchment {
    @apply bg-gradient-to-b from-[#3d3223] to-[#2a231b] border-y border-gold/30 px-6 py-4 relative;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
  }
  
  .scroll-parchment::before,
  .scroll-parchment::after {
    content: "";
    @apply absolute h-4 left-0 right-0 bg-[#3d3223];
    clip-path: polygon(0% 0%, 5% 100%, 10% 0%, 15% 100%, 20% 0%, 25% 100%, 30% 0%, 35% 100%, 40% 0%, 45% 100%, 50% 0%, 55% 100%, 60% 0%, 65% 100%, 70% 0%, 75% 100%, 80% 0%, 85% 100%, 90% 0%, 95% 100%, 100% 0%);
  }
  
  .scroll-parchment::before {
    @apply -top-4 transform rotate-180;
  }
  
  .scroll-parchment::after {
    @apply -bottom-4;
  }
  
  /* Enhanced icon glow */
  .icon-glow {
    filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.5));
    animation: iconGlow 3s ease-in-out infinite;
  }
  
  @keyframes iconGlow {
    0%, 100% { filter: drop-shadow(0 0 5px rgba(212, 175, 55, 0.3)); }
    50% { filter: drop-shadow(0 0 15px rgba(212, 175, 55, 0.7)); }
  }
  
  /* Cathedral holy light effect */
  .holy-light {
    @apply relative overflow-hidden;
  }
  
  .holy-light::before {
    content: "";
    @apply absolute inset-0 bg-gradient-to-tr from-gold/10 via-transparent to-gold/10;
    animation: holyShimmer 8s ease-in-out infinite;
  }
  
  @keyframes holyShimmer {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.3; }
  }
  
  /* Orthodox incense smoke effect */
  .incense-smoke {
    @apply absolute w-1 h-20 bg-gradient-to-t from-transparent via-white/20 to-transparent;
    filter: blur(3px);
    animation: incenseRise 5s ease-out infinite;
  }
  
  @keyframes incenseRise {
    0% { transform: translateY(0) scaleY(1) rotate(0deg); opacity: 0.7; }
    100% { transform: translateY(-100px) scaleY(2) rotate(5deg); opacity: 0; }
  }

  /* Byzantine cathedral-style page titles */
  .byzantine-title {
    @apply font-display text-4xl text-gold relative inline-block mb-8;
  }

  .byzantine-title::before,
  .byzantine-title::after {
    content: "☦";
    @apply absolute text-xl text-gold/70 top-1/2 -translate-y-1/2;
  }

  .byzantine-title::before {
    @apply -left-10;
  }

  .byzantine-title::after {
    @apply -right-10;
  }
  
  /* Cathedral dome card style with glassmorphism and light backend emission */
  .cathedral-card, .byzantine-border, .scroll-parchment {
    /* Existing brushes and gradients */
    @apply relative overflow-hidden;
    background: linear-gradient(
      to right bottom, 
      var(--panel-base-dark, rgba(15,13,4,0.81)),
      rgba(70, 34, 13, 0.16) 80%
    ), var(--panel-deep-shadow, rgba(8,6,1,0.94));
    /* Frosted glass effect */
    backdrop-filter: blur(var(--glass-blur,9px)) brightness(var(--glass-bg-light,1));
    -webkit-backdrop-filter: blur(var(--glass-blur,9px)) brightness(var(--glass-bg-light,1));
    box-shadow:
      0 1.5px 10px 0 rgba(20,13,3,0.22),
      0 0 34px 8px rgba(222,215,130, calc(var(--glass-bg-light,0) * 1.25)),
      0 0 32px 2px rgba(212,175,55, calc(var(--emissive-strength,0) * 0.7)),
      0 8px 44px 12px rgba(221, 195, 60, calc(var(--glass-bg-light,0.03))),
      0 2px 18px 0 rgba(10,8,0,0.12),
      0 0 0px 0px transparent;
    filter:
      brightness(var(--card-brightness, 1))
      drop-shadow(0 2px 20px rgba(212,175,55, calc(var(--card-lift, 0))))
      drop-shadow(0 0 8px rgba(222,215,130, calc(var(--emissive-strength,0) * 1.2)));
    /* Glossy overlay using a pseudo-element below content */
  }
  /* Add glossy shine - overlay only if not on mobile */
  .cathedral-card::before,
  .byzantine-border::before,
  .scroll-parchment::before {
    content: "";
    pointer-events: none;
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(
      110deg,
      rgba(255,255,255,calc(var(--glass-gloss,0.12))) 0%,
      rgba(255,255,255,calc(var(--glass-gloss,0.24))) 45%,
      rgba(245,236,193, calc(var(--glass-gloss,0.12))) 55%,
      rgba(255, 255, 255, 0) 60%
    );
    opacity: 1;
    z-index: 2;
    mix-blend-mode: screen;
    transition: background 0.18s, opacity 0.18s;
  }
  .cathedral-card::after,
  .byzantine-border::after,
  .scroll-parchment::after {
    /* Glass "emission"/halo behind, softly glowing, tied to the light */
    content: "";
    position: absolute;
    z-index: 0;
    left: 10%; right: 10%; top: 60%; bottom: -10%;
    background: radial-gradient(
      ellipse at 50% 40%,
      rgba(212, 175, 55, calc(var(--glass-bg-light, 0.07))) 0%,
      rgba(212, 175, 55, 0.02) 90%,
      transparent 100%
    );
    opacity: 1;
    pointer-events: none;
    filter: blur(14px) brightness(1.07);
    transition: background 0.2s, opacity 0.16s;
    /* animate emission effect */
  }

  /* Make interactivity, glow, and reflections snappier on desktop */
  @media (min-width: 640px) {
    .cathedral-card, .byzantine-border, .scroll-parchment {
      transition:
        filter 0.23s cubic-bezier(.62,.11,.48,.87),
        box-shadow 0.25s cubic-bezier(.62,.11,.48,.87),
        backdrop-filter 0.18s cubic-bezier(.51,.23,.49,.77);
      will-change: filter, box-shadow, backdrop-filter;
    }
    .cathedral-card::before, .byzantine-border::before, .scroll-parchment::before {
      transition: background 0.18s, opacity 0.18s;
    }
    .cathedral-card::after, .byzantine-border::after, .scroll-parchment::after {
      transition: background 0.2s, opacity 0.16s;
    }
  }

  @media (max-width: 639px) {
    .cathedral-card, .byzantine-border, .scroll-parchment {
      /* Disable heavy glass/blur for performance on mobile */
      --glass-blur: 7 !important;
      --glass-bg-light: 0.09 !important;
      --glass-gloss: 0.13 !important;
      filter: brightness(1) !important;
      box-shadow: none !important;
      backdrop-filter: blur(7px) !important;
    }
    .cathedral-card::after,
    .byzantine-border::after,
    .scroll-parchment::after {
      opacity: 0 !important;
    }
    .cathedral-card::before,
    .byzantine-border::before,
    .scroll-parchment::before {
      opacity: 0.08 !important;
    }
  }

  /* MouseLightOverlay core styles */
  .mouse-light-overlay {
    /* Darken everything by default */
    background: radial-gradient(
      circle 240px at var(--mouse-x, 50vw) var(--mouse-y, 50vh), 
      rgba(212,175,55,0.23) 0%,          /* strong gold light core */
      rgba(212,175,55,0.14) 15%,
      rgba(212,175,55,0.10) 36%,
      rgba(0,0,0,0.06) 43%,
      rgba(0,0,0,0.45) 60%,
      rgba(0,0,0,0.77) 100%
    );
    mix-blend-mode: lighten;
    transition: background 0.13s;
    will-change: background;
    pointer-events: none;
    z-index: 40;
    opacity: 1;
    /* Only show on desktop */
    display: block;
  }
  @media (max-width: 639px) {
    .mouse-light-overlay {
      display: none;
    }
  }

  /* Mouse darkness overlay - darkens everything except the main "light" */
  .mouse-darkness-overlay {
    background: radial-gradient(
      circle 360px at var(--mouse-x, 50vw) var(--mouse-y, 50vh),
      rgba(50, 30, 3, 0)       0%,
      rgba(30, 19, 7, 0.05)    30%,
      rgba(8, 7, 0, 0.18)      48%,
      rgba(0,0,0,0.32)         55%,
      rgba(0,0,0,0.68)         80%,
      rgba(0,0,0,0.91)       100%
    );
    mix-blend-mode: multiply;
    pointer-events: none;
    will-change: background;
    transition: background 0.18s cubic-bezier(.44,0,.56,1);
    z-index: 40;
    opacity: 1;
    display: block;
  }
  @media (max-width: 639px) {
    .mouse-darkness-overlay { display: none; }
  }

  /* Mouse highlight overlay - subtle golden glow gently lifts panels */
  .mouse-highlight-overlay {
    background: radial-gradient(
      circle 160px at var(--mouse-x, 50vw) var(--mouse-y, 50vh),
      rgba(227, 202, 104, 0.18) 0%,
      rgba(221, 186, 50, 0.10)  30%,
      rgba(185, 151, 55, 0.03)  70%,
      transparent 100%
    );
    mix-blend-mode: lighten; /* has a soft overlay effect on any content below */
    pointer-events: none;
    will-change: background;
    z-index: 50;
    opacity: 0.92;
    transition: background 0.13s;
    display: block;
  }
  @media (max-width: 639px) {
    .mouse-highlight-overlay { display: none; }
  }

  /* Panels react to cursor - "lift" as mouse nears */
  .cathedral-card, .byzantine-border, .scroll-parchment {
    filter:
      brightness(var(--card-brightness, 1))
      drop-shadow(0 2px 20px rgba(212,175,55, calc(var(--card-lift, 0))))
      drop-shadow(0 0 8px rgba(222,215,130, calc(var(--emissive-strength,0) * 1.2)));
    /* Extra "lift" on gold edges as mouse approaches, including soft halo glow */
    box-shadow:
      0 2px 18px 0 rgba(10,8,0,0.15),
      0 0 22px 3px rgba(215,180,50, calc(var(--emissive-strength,0))),
      0 0 0px 0px transparent;
    transition:
      filter 0.22s cubic-bezier(.62,.11,.48,.87),
      box-shadow 0.22s cubic-bezier(.62,.11,.48,.87);
    will-change: filter, box-shadow;
  }

  .cathedral-card .icon-glow,
  .byzantine-border .icon-glow,
  .scroll-parchment .icon-glow {
    /* These icons "emit light" when mouse is close */
    filter: drop-shadow(0 0 7px rgba(212,175,55, calc(var(--emissive-strength,0.02) + 0.14)))
      brightness(calc(1.05 + var(--emissive-strength,0) * 3));
    transition: filter 0.19s cubic-bezier(.55,.11,.48,.8);
  }

  /* Beautiful soft styling for "emissive" gold details */
  .cathedral-card, .byzantine-border, .scroll-parchment {
    --panel-base-dark: rgba(15, 13, 4, 0.81);
    --panel-deep-shadow: rgba(8, 6, 1, 0.94);
    background: linear-gradient(to right bottom, 
      var(--panel-base-dark), 
      rgba(70, 34, 13, 0.16) 80%),
      var(--panel-deep-shadow);
  }

  /* Cards get extra darkness/mood for more dramatic light */
  .cathedral-card {
    background-blend-mode: multiply;
    border-color: rgba(180,140,50,0.26);
  }

  /* Panel borders glow more with proximity */
  .byzantine-border {
    border-color: rgba(212, 175, 55, calc(0.34 + var(--emissive-strength,0) * 2));
  }
  .scroll-parchment {
    border-color: rgba(212,175,55, calc(0.18 + var(--emissive-strength,0) * 1.2));
  }

  /* Animated highlights for borders and details */
  .cathedral-card::before,
  .byzantine-border::before,
  .scroll-parchment::before {
    opacity: calc(0.5 + var(--emissive-strength,0) * 2);
    box-shadow: 0 0 calc(10px + var(--emissive-strength,0)*32px) 0 rgba(221, 195, 60, calc(.2 + var(--emissive-strength,0) * 1.5));
  }
  .cathedral-card::after,
  .byzantine-border::after,
  .scroll-parchment::after {
    opacity: calc(0.5 + var(--emissive-strength,0) * 2);
  }

  @media (max-width: 639px) {
    .cathedral-card, .byzantine-border, .scroll-parchment {
      /* No dynamic per-panel lift on mobile for performance */
      --card-lift: 0 !important;
      --card-brightness: 1 !important;
      --emissive-strength: 0 !important;
    }
  }
}

/* Panel “lift” (real-time) - the JS MouseLightOverlay sets custom CSS variables */
body {
  --mouse-x: 50vw;
  --mouse-y: 50vh;
}
.cathedral-card, .byzantine-border, .scroll-parchment {
  --card-brightness: 1;
  --card-lift: 0;
}
@media (min-width: 640px) {
  .cathedral-card, .byzantine-border, .scroll-parchment {
    /* This trick uses a CSS custom property filter, JS will update this on move! */
    transition: filter 0.25s cubic-bezier(.53,.07,.53,.93), box-shadow 0.12s;
  }
}

/* Animate panel brightness and glow based on mouse position */
@media (min-width: 640px) {
  body.panel-lift-active .cathedral-card, 
  body.panel-lift-active .byzantine-border,
  body.panel-lift-active .scroll-parchment {
    /* These get updated inline by a future enhancement, so prep the filter. */
  }
}
/* Page appearance animation */
@keyframes appear {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-appear {
  animation: appear 0.8s ease-out forwards;
}

/* Cathedral prayer reveal animation */
.prayer-reveal {
  opacity: 0;
  transform: translateY(10px);
  animation: prayerReveal 1.5s ease-out forwards;
}

@keyframes prayerReveal {
  0% { opacity: 0; transform: translateY(10px); }
  30% { opacity: 0.3; transform: translateY(5px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* Make the scrolling smooth */
html {
  scroll-behavior: smooth;
}

/* Font classes */
.font-display {
  font-family: 'Playfair Display', serif;
}

.font-body {
  font-family: 'Source Serif Pro', serif;
}

/* Enhanced glassmorphism effect for cathedral ambiance */
.glass-morphism {
  @apply backdrop-blur-xl bg-white/5 border border-white/10 shadow-[0_4px_12px_-2px_rgba(0,0,0,0.3)];
}

/* Enhanced holy light effects */
.holy-light {
  position: relative;
  overflow: hidden;
}

.holy-light::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, rgba(0, 0, 0, 0) 70%);
  opacity: 0.7;
  z-index: -1;
  animation: pulse-light 8s infinite ease-in-out;
}

.holy-glow-sm {
  box-shadow: 0 0 15px 1px rgba(212, 175, 55, 0.2);
}

.holy-glow-md {
  box-shadow: 0 0 25px 2px rgba(212, 175, 55, 0.3);
}

.holy-glow-lg {
  box-shadow: 0 0 35px 3px rgba(212, 175, 55, 0.4);
}

@keyframes pulse-light {
  0% { opacity: 0.5; transform: scale(0.9); }
  50% { opacity: 0.8; transform: scale(1.1); }
  100% { opacity: 0.5; transform: scale(0.9); }
}

/* Enhanced candle glow animation */
.candle-glow {
  animation: float 4s ease-in-out infinite;
  box-shadow: 0 0 10px 2px rgba(212, 175, 55, 0.6);
}

@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
}

/* Candle flicker animation */
@keyframes candle-flicker {
  0%, 100% { 
    transform: translateX(-50%) scale(0.9) rotate(-2deg); 
    opacity: 0.8;
    box-shadow: 0 0 6px 2px rgba(255, 220, 180, 0.5);
  }
  25% { 
    transform: translateX(-48%) scale(1.1) rotate(1deg); 
    opacity: 1;
    box-shadow: 0 0 10px 3px rgba(255, 220, 180, 0.7);
  }
  50% { 
    transform: translateX(-52%) scale(1) rotate(-1deg); 
    opacity: 0.9;
    box-shadow: 0 0 8px 2px rgba(255, 220, 180, 0.6);
  }
  75% { 
    transform: translateX(-49%) scale(1.05) rotate(1.5deg); 
    opacity: 1;
    box-shadow: 0 0 12px 4px rgba(255, 220, 180, 0.8);
  }
}

@keyframes flame-glow {
  0%, 100% { 
    transform: translateX(-50%) scale(0.9); 
    opacity: 0.8;
    filter: blur(4px);
  }
  50% { 
    transform: translateX(-50%) scale(1.2); 
    opacity: 1;
    filter: blur(6px);
  }
}

/* Audio visualization */
.audio-visualizer {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
}

.audio-bar {
  width: 3px;
  height: 15px;
  background-color: #D4AF37;
  border-radius: 3px;
  animation: audio-wave 1.2s ease-in-out infinite;
}

.audio-bar:nth-child(1) {
  animation-delay: 0s;
}

.audio-bar:nth-child(2) {
  animation-delay: 0.3s;
}

.audio-bar:nth-child(3) {
  animation-delay: 0.6s;
}

.audio-bar:nth-child(4) {
  animation-delay: 0.9s;
}

@keyframes audio-wave {
  0%, 100% { height: 5px; }
  50% { height: 15px; }
}

/* Cathedral-style custom scrollbar */
.custom-scrollbar::-webkit-scrollbar {
  width: 5px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(26, 31, 44, 0.3);
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(212, 175, 55, 0.3);
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(212, 175, 55, 0.5);
}

/* Global scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(26, 31, 44, 0.5);
}

::-webkit-scrollbar-thumb {
  background: rgba(155, 35, 53, 0.4);
  border-radius: 4px;
  border: 1px solid rgba(212, 175, 55, 0.2);
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(155, 35, 53, 0.6);
}
