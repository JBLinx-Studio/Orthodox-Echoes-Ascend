@tailwind components;

@layer components {
  /* Cathedral/glass/metallic/grungy panel base styles */
  .cathedral-card, .byzantine-border, .scroll-parchment {
    /* Existing brushes and gradients */
    @apply relative overflow-hidden;
    background: linear-gradient(
      to right bottom, 
      var(--panel-base-dark, rgba(15,13,4,0.81)),
      rgba(70, 34, 13, 0.16) 80%
    ), var(--panel-deep-shadow, rgba(8,6,1,0.94));
    /* Frosted glass effect */
    backdrop-filter: blur(var(--glass-blur,9px)) brightness(var(--glass-bg-light,1));
    -webkit-backdrop-filter: blur(var(--glass-blur,9px)) brightness(var(--glass-bg-light,1));
    box-shadow:
      0 1.5px 10px 0 rgba(20,13,3,0.22),
      0 0 34px 8px rgba(222,215,130, calc(var(--glass-bg-light,0) * 1.25)),
      0 0 32px 2px rgba(212,175,55, calc(var(--emissive-strength,0) * 0.7)),
      0 8px 44px 12px rgba(221, 195, 60, calc(var(--glass-bg-light,0.03))),
      0 2px 18px 0 rgba(10,8,0,0.12),
      0 0 0px 0px transparent;
    filter:
      brightness(var(--card-brightness, 1))
      drop-shadow(0 2px 20px rgba(212,175,55, calc(var(--card-lift, 0))))
      drop-shadow(0 0 8px rgba(222,215,130, calc(var(--emissive-strength,0) * 1.2)));
    /* Glossy overlay using a pseudo-element below content */
  }
  /* Add glossy shine - overlay only if not on mobile */
  .cathedral-card::before,
  .byzantine-border::before,
  .scroll-parchment::before {
    content: "";
    pointer-events: none;
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(
      110deg,
      rgba(255,255,255,calc(var(--glass-gloss,0.12))) 0%,
      rgba(255,255,255,calc(var(--glass-gloss,0.24))) 45%,
      rgba(245,236,193, calc(var(--glass-gloss,0.12))) 55%,
      rgba(255, 255, 255, 0) 60%
    );
    opacity: 1;
    z-index: 2;
    mix-blend-mode: screen;
    transition: background 0.18s, opacity 0.18s;
  }
  .cathedral-card::after,
  .byzantine-border::after,
  .scroll-parchment::after {
    /* Glass "emission"/halo behind, softly glowing, tied to the light */
    content: "";
    position: absolute;
    z-index: 0;
    left: 10%; right: 10%; top: 60%; bottom: -10%;
    background: radial-gradient(
      ellipse at 50% 40%,
      rgba(212, 175, 55, calc(var(--glass-bg-light, 0.07))) 0%,
      rgba(212, 175, 55, 0.02) 90%,
      transparent 100%
    );
    opacity: 1;
    pointer-events: none;
    filter: blur(14px) brightness(1.07);
    transition: background 0.2s, opacity 0.16s;
    /* animate emission effect */
  }

  /* Make interactivity, glow, and reflections snappier on desktop */
  @media (min-width: 640px) {
    .cathedral-card, .byzantine-border, .scroll-parchment {
      transition:
        filter 0.23s cubic-bezier(.62,.11,.48,.87),
        box-shadow 0.25s cubic-bezier(.62,.11,.48,.87),
        backdrop-filter 0.18s cubic-bezier(.51,.23,.49,.77);
      will-change: filter, box-shadow, backdrop-filter;
    }
    .cathedral-card::before, .byzantine-border::before, .scroll-parchment::before {
      transition: background 0.18s, opacity 0.18s;
    }
    .cathedral-card::after, .byzantine-border::after, .scroll-parchment::after {
      transition: background 0.2s, opacity 0.16s;
    }
  }

  @media (max-width: 639px) {
    .cathedral-card, .byzantine-border, .scroll-parchment {
      /* Disable heavy glass/blur for performance on mobile */
      --glass-blur: 7 !important;
      --glass-bg-light: 0.09 !important;
      --glass-gloss: 0.13 !important;
      filter: brightness(1) !important;
      box-shadow: none !important;
      backdrop-filter: blur(7px) !important;
    }
    .cathedral-card::after,
    .byzantine-border::after,
    .scroll-parchment::after {
      opacity: 0 !important;
    }
    .cathedral-card::before,
    .byzantine-border::before,
    .scroll-parchment::before {
      opacity: 0.08 !important;
    }
  }

  /* Panels react to cursor - "lift" as mouse nears */
  .cathedral-card, .byzantine-border, .scroll-parchment {
    filter:
      brightness(var(--card-brightness, 1))
      drop-shadow(0 2px 20px rgba(212,175,55, calc(var(--card-lift, 0))))
      drop-shadow(0 0 8px rgba(222,215,130, calc(var(--emissive-strength,0) * 1.2)));
    /* Extra "lift" on gold edges as mouse approaches, including soft halo glow */
    box-shadow:
      0 2px 18px 0 rgba(10,8,0,0.15),
      0 0 22px 3px rgba(215,180,50, calc(var(--emissive-strength,0))),
      0 0 0px 0px transparent;
    transition:
      filter 0.22s cubic-bezier(.62,.11,.48,.87),
      box-shadow 0.22s cubic-bezier(.62,.11,.48,.87);
    will-change: filter, box-shadow;
  }

  .cathedral-card .icon-glow,
  .byzantine-border .icon-glow,
  .scroll-parchment .icon-glow {
    /* These icons "emit light" when mouse is close */
    filter: drop-shadow(0 0 7px rgba(212,175,55, calc(var(--emissive-strength,0.02) + 0.14)))
      brightness(calc(1.05 + var(--emissive-strength,0) * 3));
    transition: filter 0.19s cubic-bezier(.55,.11,.48,.8);
  }

  /* Beautiful soft styling for "emissive" gold details */
  .cathedral-card, .byzantine-border, .scroll-parchment {
    --panel-base-dark: rgba(15, 13, 4, 0.81);
    --panel-deep-shadow: rgba(8, 6, 1, 0.94);
    background: linear-gradient(to right bottom, 
      var(--panel-base-dark), 
      rgba(70, 34, 13, 0.16) 80%),
      var(--panel-deep-shadow);
  }

  /* Cards get extra darkness/mood for more dramatic light */
  .cathedral-card {
    background-blend-mode: multiply;
    border-color: rgba(180,140,50,0.26);
  }

  /* Panel borders glow more with proximity */
  .byzantine-border {
    border-color: rgba(212, 175, 55, calc(0.34 + var(--emissive-strength,0) * 2));
  }
  .scroll-parchment {
    border-color: rgba(212,175,55, calc(0.18 + var(--emissive-strength,0) * 1.2));
  }

  /* Animated highlights for borders and details */
  .cathedral-card::before,
  .byzantine-border::before,
  .scroll-parchment::before {
    opacity: calc(0.5 + var(--emissive-strength,0) * 2);
    box-shadow: 0 0 calc(10px + var(--emissive-strength,0)*32px) 0 rgba(221, 195, 60, calc(.2 + var(--emissive-strength,0) * 1.5));
  }
  .cathedral-card::after,
  .byzantine-border::after,
  .scroll-parchment::after {
    opacity: calc(0.5 + var(--emissive-strength,0) * 2);
  }

  @media (max-width: 639px) {
    .cathedral-card, .byzantine-border, .scroll-parchment {
      /* No dynamic per-panel lift on mobile for performance */
      --card-lift: 0 !important;
      --card-brightness: 1 !important;
      --emissive-strength: 0 !important;
    }
  }
  /* --- CATHEDRAL GLASS & METALLIC PANELS --- */
  .cathedral-card, .byzantine-border, .scroll-parchment {
  /* Base dark glass with see-through, prismatic, and EMISSIVE overlays! */
  background:
    /* Subtle cathedral window grunge */
    url('/images/noise-pattern.png') repeat,
    linear-gradient(118deg, rgba(255,255,255,0.04) 2%, rgba(80,54,16,0.09) 24%, rgba(35,21,0,0.22) 62%, rgba(10,8,4,0.18) 100%),
    /* Frosted glass color/metallic core */
    linear-gradient(125deg,
      rgba(212, 175, 55, calc(var(--glass-prism,0.05))) 0%,
      rgba(161, 135, 211, calc(var(--glass-prism,0.037))) 27%,
      rgba(55, 236, 220, calc(var(--glass-prism,0.031))) 83%,
      rgba(40, 32, 15, 0.20) 100%
    ),
    /* Deep underglow from light emission */
    radial-gradient(ellipse 110% 130% at 50% 55%, rgba(212,175,55,var(--glass-bg-light,0.07)) 0%, rgba(35,24,2,0.18) 70%,
      transparent 100%
    ),
    /* Core glass shadow */
    linear-gradient(to right bottom, var(--panel-base-dark, rgba(15,13,4,0.81)),
      rgba(70, 34, 13, 0.16) 80%
    ),
    var(--panel-deep-shadow, rgba(8,6,1,0.94));
  background-blend-mode: screen,multiply,screen,multiply,normal,normal;

  /* Polish glass/metallic illusion */
  /* Glass shine inline layer (will also be animated by JS via --glass-gloss) handled by ::before */
  backdrop-filter: blur(var(--glass-blur,18px)) brightness(var(--glass-bg-light,1.04)) saturate(1.18);
  -webkit-backdrop-filter: blur(var(--glass-blur,18px)) brightness(var(--glass-bg-light,1.04)) saturate(1.18);
  /* Let more light through (panel opacity slightly lower for highlight) */
  opacity: calc(0.99 + var(--glass-bg-light, 0.04));
  /* Strong glass border with highlight */
  border: 1.3px solid rgba(212,175,55,calc(0.22 + var(--emissive-strength,0) * 1.7));
  /* Bold box shadows for depth, soft emission, metallic halo underneath panel, dynamic! */
  box-shadow:
    0 1.5px 10px 0 rgba(20,13,3,0.18),
    0 0 34px 11px rgba(222,215,130, calc(var(--glass-bg-light,0.05))),
    0 0 36px 15px rgba(212,175,55, calc(var(--emissive-strength,0) * 0.53)),
    0 8px 58px 22px rgba(221, 195, 60, calc(var(--glass-bg-light,0.10))),
    0 2px 18px 0 rgba(10,8,0,0.09),
    0 0 0px 0px transparent;
  /* Metallic prismatic accent ring */
  outline: 2px solid rgba(120,110,230,var(--glass-prism,0.06));
  outline-offset: -5px;
  /* Real physically-based filter lift and shine: */
  filter:
    brightness(var(--card-brightness, 1))
    drop-shadow(0 2px 28px rgba(212,175,55, calc(var(--card-lift, 0))))
    drop-shadow(0 0 17px rgba(222,215,130, calc(var(--emissive-strength,0) * 1.4)))
    contrast(1.08) saturate(1.09);
  /* Subtle metallic shimmer animation (optional, for bigger impact) */
  animation: glass-metal-shine 6s linear infinite;
}

@keyframes glass-metal-shine {
  0%,100% { background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%; }
  50% { background-position: 13% 9%, 22% 30%, 30% 22%, 40% 12%, 16% 50%, 0% 0%; }
}

/* --- Panel glass glossiness + prismatic halo via pseudo-elements --- */
.cathedral-card::before,
.byzantine-border::before,
.scroll-parchment::before {
  content: "";
  pointer-events: none;
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  /* Broad, glossy highlight with prismatic color */
  background:
    linear-gradient(110deg,
      rgba(255,255,255,calc(var(--glass-gloss,0.13))) 0%,
      rgba(255,255,255,calc(var(--glass-gloss,0.30))) 45%,
      rgba(245,236,193, calc(var(--glass-gloss,0.10))) 55%,
      rgba(120,110,230,calc(var(--glass-prism,0.11))) 68%,
      rgba(255,255,255,0) 77%
    ),
    /* Prismatic rainbow border caustic effect + metallic shine */
    radial-gradient(
      ellipse at 85% 20%,
      rgba(110, 210, 255, calc(var(--glass-prism,0.07))) 0%,
      rgba(212, 175, 55, calc(var(--glass-gloss,0.07))) 70%,
      transparent 100%
    );
  opacity: 1;
  z-index: 2;
  mix-blend-mode: color-dodge;
  transition: background 0.28s, opacity 0.29s;
}

/* Glowing, colored light caustic halo under panel */
.cathedral-card::after,
.byzantine-border::after,
.scroll-parchment::after {
  content: "";
  position: absolute;
  z-index: 0;
  left: -10%; right: -10%; top: 70%; bottom: -14%;
  background:
    radial-gradient(
      ellipse at 50% 40%,
      rgba(212, 175, 55, calc(var(--glass-bg-light, 0.13) + var(--glass-prism,0.08))) 10%,
      rgba(212, 175, 55, 0.02) 80%,
      transparent 100%
    ),
    radial-gradient(circle at 60% 75%, rgba(110, 210, 255, calc(var(--glass-prism,0.07))) 9%, transparent 77%);
  opacity: 1;
  pointer-events: none;
  filter: blur(20px) brightness(1.1) saturate(1.2);
  transition: background 0.18s, opacity 0.20s;
}

/* See-through, semi-textured effect for glass panels—
   shows background more where light is strong */
.cathedral-card, .byzantine-border, .scroll-parchment {
  background-color: rgba(30, 24, 12, 0.34);
  /* Boost alpha around cursor */
  opacity: calc(0.92 + var(--glass-bg-light, 0.05));
  transition:
    filter 0.25s cubic-bezier(.53,.07,.53,.93),
    box-shadow 0.18s,
    background 0.39s;
}
.cathedral-card, .byzantine-border, .scroll-parchment {
  /* Tiny metallic flecks to simulate reflective dust */
  background-image: url("/images/noise-pattern.png"),
    linear-gradient(120deg, rgba(170,160,230,0.015) 60%, transparent 100%);
  background-blend-mode: luminosity, screen;
}

/* Slightly more see-through on panel edges for a realistic glass effect: */
.cathedral-card, .byzantine-border, .scroll-parchment {
  mask-image: radial-gradient(circle at 55% 60%, #fff 75%, #fff8 89%, #fff2 98%, transparent 100%);
}

/* Buttons and tabs: emit a gold glow by default, intensifying on hover */
.button, .tab, .shadcn-btn, .shadcn-tab {
  box-shadow:
    0 0 18px 3px rgba(212,175,55,0.2),
    0 1.5px 3.5px 0 rgba(40,30,11,0.11);
  border-color: rgba(212,175,55,0.20);
  background:
    linear-gradient(91deg, rgba(212,175,55,0.06) 0%, rgba(72,41,13,0.03) 74%);
  text-shadow: 0 0 3px rgba(212,175,55,0.09);
  transition: box-shadow 0.17s, background 0.17s, border-color 0.13s;
}
.button:hover, .tab:hover, .shadcn-btn:hover, .shadcn-tab:hover,
.button:focus, .tab:focus, .shadcn-btn:focus, .shadcn-tab:focus {
  box-shadow:
    0 0 24px 9px rgba(212,175,55,0.28),
    0 2px 5.5px 0 rgba(40,30,11,0.11);
  border-color: rgba(212,175,55,0.34);
  background:
    linear-gradient(91deg, rgba(212,175,55,0.13) 0%, rgba(72,41,13,0.05) 74%);
  text-shadow: 0 0 3.5px rgba(212,175,55,0.12);
}

/* Tabs in shadcn ui: illuminated indicator & glow on active triggers */
[role="tablist"] .shadcn-tab[data-state="active"], [role="tablist"] .tab[data-state="active"] {
  box-shadow:
    0 0 30px 6px rgba(212,175,55,0.30),
    0 2px 7.5px 0 rgba(40,30,11,0.14);
  border-color: rgba(212,175,55,0.38);
  background:
    linear-gradient(96deg, rgba(212,175,55,0.19) 0%, rgba(72,41,13,0.07) 74%);
  text-shadow: 0 1px 4.5px #D4AF3780;
}

/* Headings: a holy gold glow always-on effect */
.illuminated-heading, .byzantine-heading, .gold-heading, h1, h2, h3, h4 {
  text-shadow:
    0 1.5px 8.6px #D4AF3755,
    0 0.5px 1.5px #FFF6DD55,
    0 0 1px #AA8C2C99;
  color: inherit;
}
}
